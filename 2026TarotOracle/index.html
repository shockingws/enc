import React, { useState } from 'react';
import { Crown, Sword, Flame, Coins, ArrowLeft, Sparkles, Target, Lightbulb, ScrollText, Mail, ChevronRight, Flower, Star, Sun, Moon, Hand, User, Briefcase, TrendingUp, Shield, ExternalLink } from 'lucide-react';

const TarotApp = () => {
  const [gameState, setGameState] = useState('intro'); // intro, shuffling, result
  const [selectedCard, setSelectedCard] = useState(null);
  const [careerStage, setCareerStage] = useState('senior'); // junior, senior, leader

  const tarotData = {
    A: {
      id: 'A',
      title: '皇帝牌 (The Emperor)',
      imgUrl: 'https://github.com/shockingws/enc/blob/main/Tarot_theEmperor.png?raw=true',
      icon: <Crown size={48} className="text-amber-500" strokeWidth={1.5} />,
      keywords: ['掌控局勢', '建立架構', '升遷掌權'],
      advice: {
        junior: {
          logic: '對於初入社會的你，皇帝牌代表「規則」與「導師」。你需要找到一個強而有力的領導者跟隨，學習職場的潛規則與專業架構。現在不是叛逆的時候，而是打穩地基、展現執行力與紀律的時刻。',
          actions: [
            { title: '尋找導師', desc: '觀察公司內最有權威的前輩，模仿他的工作邏輯。' },
            { title: '遵守紀律', desc: '準時、負責、回報，這些基本功是你的信任資產。' },
            { title: '理解架構', desc: '搞懂公司的組織圖與商業模式，不要只埋頭苦幹。' }
          ],
          note: '紀律是自由的前提。現在的刻意練習與服從，是為了將來你有能力制定規則。'
        },
        senior: {
          logic: '對於資深工作者，這是你「確立疆土」的一年。你的專業應該要轉化為 SOP，你不再只是執行者，而是準管理者。你有極高機率獲得晉升或帶領專案，重點在於展現你的「大局觀」與「系統化能力」。',
          actions: [
            { title: '建立 SOP', desc: '將你的工作流程標準化，讓系統為你工作。' },
            { title: '向上管理', desc: '用數據與結果與高層對話，爭取資源。' },
            { title: '爭取權力', desc: '主動承擔責任，讓大家習慣聽你的指揮。' }
          ],
          note: '你不需要更多的工作量，你需要的是更強的「系統」。將經驗封裝成標準品，讓別人為你執行。'
        },
        leader: {
          logic: '對於創業者或主管，皇帝牌是大吉之兆，代表「穩固」與「擴張」。你的決策將決定組織的格局。2026 年適合由上而下推行新制度，強化組織紀律，並將你的意志貫徹到團隊中。',
          actions: [
            { title: '抓大放小', desc: '專注於戰略決策，將執行細節授權給下屬。' },
            { title: '優化組織', desc: '汰弱留強，建立更有效率的賞罰機制。' },
            { title: '鞏固資產', desc: '確保現金流穩健，為未來的擴張儲備彈藥。' }
          ],
          note: '真正的權力不是控制，而是影響力。建立一個能自我運轉的生態系，才是皇帝的最高境界。'
        }
      }
    },
    B: {
      id: 'B',
      title: '寶劍六 (Six of Swords)',
      imgUrl: 'https://github.com/shockingws/enc/blob/main/Tarot_sixofswords.png?raw=true',
      icon: <Sword size={48} className="text-blue-300" strokeWidth={1.5} />,
      keywords: ['戰略轉移', '渡過難關', '遠端/外派'],
      advice: {
        junior: {
          logic: '覺得現在的工作學不到東西，或是環境氣氛很差嗎？寶劍六告訴你：該走了。對於新人來說，這張牌暗示著「尋找新大陸」。不要害怕改變，去一個能讓你成長、或是薪資福利更好的地方。',
          actions: [
            { title: '勇敢跳槽', desc: '如果環境有毒，請果斷止損，不要浪費青春。' },
            { title: '學習新技', desc: '利用下班時間學習 AI 或語言，這是你的船票。' },
            { title: '跨域嘗試', desc: '不要被科系限制，去探索完全不同的產業。' }
          ],
          note: '良禽擇木而棲。如果這裡的土壤種不出你要的花，換個盆栽並不是逃避，而是生存智慧。'
        },
        senior: {
          logic: '資深的你可能遇到了職涯瓶頸，感到停滯不前。寶劍六建議採取「戰略性撤退」或「轉移陣地」。這可能意味著外派、轉換跑道，或是轉向遠端工作（Remote Work）與數位遊牧，追求更佳的生活平衡。',
          actions: [
            { title: '尋求外派', desc: '爭取海外或跨部門的機會，物理移動帶來轉機。' },
            { title: '優化履歷', desc: '盤點過去成就，包裝成可遷移的技能包。' },
            { title: '尋求獵頭', desc: '你需要外部的引路人，主動聯繫獵頭顧問。' }
          ],
          note: '轉身比堅持更需要勇氣。你的下一站應該是為了「生活型態」而選，而不僅僅是為了薪水。'
        },
        leader: {
          logic: '作為管理者，這張牌暗示組織需要「重整」或「轉型」。也許某個業務線長期虧損，或者是團隊氣氛低迷。你需要扮演那個掌舵的人，帶領大家渡過陣痛期，航向更有潛力的市場。',
          actions: [
            { title: '割捨虧損', desc: '果斷砍掉不賺錢的專案或不適任的人員。' },
            { title: '安撫軍心', desc: '轉型期間人心浮動，溝通願景至關重要。' },
            { title: '數位轉型', desc: '引入新工具或流程，提升團隊的運作效率。' }
          ],
          note: '帶領團隊穿越迷霧是艦長的責任。不要害怕斬斷沈沒成本，現在的痛苦是為了未來的存活。'
        }
      }
    },
    C: {
      id: 'C',
      title: '權杖王牌 (Ace of Wands)',
      imgUrl: 'https://github.com/shockingws/enc/blob/main/Tarot_aceofwands.png?raw=true',
      icon: <Flame size={48} className="text-rose-400" strokeWidth={1.5} />,
      keywords: ['點燃火花', '全新專案', 'Side Hustle'],
      advice: {
        junior: {
          logic: '你的熱情就是你最大的武器！權杖王牌代表無限的潛力。新人不要怕犯錯，要怕的是「沒人看見你」。主動舉手接下那些沒人想做的任務，用你的創意驚艷大家，這是你快速脫穎而出的機會。',
          actions: [
            { title: '大膽表現', desc: '會議上勇敢發言，提出你的年輕觀點。' },
            { title: '快速試錯', desc: '多方嘗試不同任務，找出你的天賦熱情所在。' },
            { title: '展現態度', desc: '能力可以學，但積極的態度會讓貴人想幫你。' }
          ],
          note: '你的直覺比經驗更值錢。與其想破頭，不如先做個 60 分的版本丟到市場上看看反應。'
        },
        senior: {
          logic: '工作久了熱情消磨殆盡？這張牌要你重燃火花！2026 非常適合開啟「副業 (Side Hustle)」或是在公司內部啟動一個全新專案。不要滿足於領死薪水，去創造屬於你自己的「從 0 到 1」。',
          actions: [
            { title: '啟動副業', desc: '利用下班時間，將你的專業變成第二收入曲線。' },
            { title: '個人品牌', desc: '開始在網路上輸出觀點，建立職場影響力。' },
            { title: '提案開發', desc: '向老闆提出一個能幫公司賺錢的新計畫。' }
          ],
          note: '不要讓公司的 Title 定義你。那把心中的火炬，值得你用週末的時間去澆灌，它可能長成你的第二曲線。'
        },
        leader: {
          logic: '對於創業者，這是「再次創業」或「開發新產品」的最佳時機。市場上出現了新的機會（可能是 AI 或新趨勢），你需要像拿著火把的人一樣，指引方向並激勵團隊的士氣，搶佔先機。',
          actions: [
            { title: '搶佔風口', desc: '敏銳洞察市場新趨勢，快速推出 MVP 測試。' },
            { title: '激勵願景', desc: '用你的熱情感染團隊，讓大家相信新的目標。' },
            { title: '決斷執行', desc: '權杖火花稍縱即逝，決策速度是勝負關鍵。' }
          ],
          note: '創新是唯一的護城河。當所有人都在觀望時，你的果斷投入就是最大的紅利。'
        }
      }
    },
    D: {
      id: 'D',
      title: '錢幣九 (Nine of Pentacles)',
      imgUrl: 'https://github.com/shockingws/enc/blob/main/Tarot_nineofpentacles.png?raw=true',
      icon: <Coins size={48} className="text-emerald-400" strokeWidth={1.5} />,
      keywords: ['優雅收成', '財務獨立', '接案/自由工作'],
      advice: {
        junior: {
          logic: '錢幣九提醒新人：「先有麵包，再談詩與遠方」。現階段的重點是累積「硬實力」與「第一桶金」。不要急著享受，把薪水投資在學習技能上，讓自己盡快具備「不可取代性」。',
          actions: [
            { title: '儲蓄理財', desc: '養成記帳習慣，儘早開始定期定額投資。' },
            { title: '技能變現', desc: '思考你的技能是否能直接換錢？提升專業度。' },
            { title: '考取證照', desc: '累積行業內的認可證明，增加談薪籌碼。' }
          ],
          note: '複利是世界第八大奇蹟，技能也是。現在每一分投入學習的錢，未來都會十倍奉還。'
        },
        senior: {
          logic: '你已經累積了足夠的實力，現在是「收割」的時候。你有能力成為高價值的自由工作者或顧問，擁有選擇工作的權利。重點在於「提高客單價」，而不是用時間換錢。追求工作與生活的優雅平衡。',
          actions: [
            { title: '價值定價', desc: '盤點你的服務，勇敢提高報價，篩選優質客戶。' },
            { title: '被動收入', desc: '將知識模組化（如課程、電子書），創造睡後收入。' },
            { title: '生活品質', desc: '工作是為了生活，別忘了犒賞自己，保持身心富足。' }
          ],
          note: '你的時間越來越貴，不該浪費在低價值的磨合上。學會優雅地說「不」，是通往財富自由的必修課。'
        },
        leader: {
          logic: '對於成功者而言，錢幣九象徵著「財務自由」與「資產傳承」。你的重點不再是親力親為，而是資產配置與風險管理。讓錢為你工作，並享受豐碩的果實。',
          actions: [
            { title: '資產配置', desc: '重新檢視投資組合，確保資產穩健增長。' },
            { title: '信任授權', desc: '花錢買別人的時間，讓自己從瑣事中解脫。' },
            { title: '長期佈局', desc: '思考企業或財富的傳承，佈局下一個十年。' }
          ],
          note: '真正的富足是「選擇權」。當你不為了錢工作時，你做出的決策才會是最精準、長遠的。'
        }
      }
    },
  };

  const handleCardClick = (cardId) => {
    setGameState('shuffling');
    setTimeout(() => {
      setSelectedCard(cardId);
      setGameState('result');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }, 1200);
  };

  const resetGame = () => {
    setGameState('intro');
    setSelectedCard(null);
    setCareerStage('senior'); // Reset to default middle ground
  };

  // Improved Divider
  const ArtNouveauDivider = () => (
    <div className="flex items-center justify-center gap-4 my-8 opacity-60">
      <div className="h-[1px] flex-1 bg-gradient-to-r from-transparent via-amber-500/50 to-transparent"></div>
      <div className="relative">
         <Star size={16} className="text-amber-500 relative z-10" />
         <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-amber-500/20 blur-md rounded-full"></div>
      </div>
      <div className="h-[1px] flex-1 bg-gradient-to-r from-transparent via-amber-500/50 to-transparent"></div>
    </div>
  );

  // New "Ornate" Card Component
  const Card = ({ id, onClick, disabled }) => (
    <div 
      onClick={() => !disabled && onClick(id)}
      className={`
        relative group cursor-pointer perspective-1000 w-full aspect-[2/3.4]
        ${disabled ? 'cursor-default' : 'hover:-translate-y-4 hover:scale-[1.02]'}
        transition-all duration-700 ease-out
      `}
    >
      <div className="absolute inset-0 rounded-t-full rounded-b-2xl shadow-[0_10px_40px_-10px_rgba(0,0,0,0.8)] overflow-hidden bg-[#1e293b] border-[3px] border-[#8B5E3C] group-hover:border-amber-400 group-hover:shadow-[0_0_30px_rgba(251,191,36,0.3)] transition-all z-10">
          
          {/* 1. Rich Background Texture */}
          <div className="absolute inset-0 bg-[#0f172a]" />
          <div className="absolute inset-0 bg-[radial-gradient(circle_at_50%_0%,#451a03_0%,#0f172a_60%)] opacity-80" />
          
          {/* 2. Complex Mandala Pattern Overlay */}
          <div className="absolute inset-0 opacity-20" 
               style={{
                   backgroundImage: `
                     repeating-radial-gradient(circle at 50% 50%, transparent 0, transparent 10px, #b45309 10px, #b45309 11px),
                     radial-gradient(circle at 50% 50%, #b45309 0%, transparent 20%)
                   `,
                   backgroundSize: '100% 100%, 100% 100%'
               }}>
          </div>

          {/* 3. Central Motif - The "Sunburst" */}
          <div className="absolute inset-0 flex flex-col items-center justify-center group-hover:scale-105 transition-transform duration-1000">
              <div className="relative">
                 {/* Glowing Halo Back */}
                 <div className="absolute -inset-16 bg-amber-600/10 rounded-full blur-2xl group-hover:bg-amber-600/20 transition-all duration-700"></div>
                 
                 {/* Rotating Outer Ring */}
                 <div className="w-40 h-40 border border-amber-500/20 rounded-full flex items-center justify-center relative animate-[spin_20s_linear_infinite]">
                    <div className="absolute top-0 w-2 h-2 bg-amber-600 rounded-full shadow-[0_0_10px_#d97706]"></div>
                    <div className="absolute bottom-0 w-2 h-2 bg-amber-600 rounded-full shadow-[0_0_10px_#d97706]"></div>
                    <div className="absolute left-0 w-2 h-2 bg-amber-600 rounded-full shadow-[0_0_10px_#d97706]"></div>
                    <div className="absolute right-0 w-2 h-2 bg-amber-600 rounded-full shadow-[0_0_10px_#d97706]"></div>
                 </div>

                 {/* Inner Ornate Layers */}
                 <div className="absolute inset-0 flex items-center justify-center">
                    <div className="w-32 h-32 border-[1px] border-amber-500/40 rounded-full flex items-center justify-center bg-[#1e293b]/50 backdrop-blur-sm">
                        <div className="w-24 h-24 border border-dashed border-amber-400/30 rounded-full flex items-center justify-center">
                            {/* Floral Silhouette Background */}
                            <Flower size={80} className="text-amber-900 absolute opacity-40 rotate-12" />
                            <Flower size={80} className="text-amber-900 absolute opacity-40 -rotate-12" />
                        </div>
                    </div>
                 </div>

                 {/* Center Letter */}
                 <div className="absolute inset-0 flex items-center justify-center z-20">
                    <span className="font-serif text-5xl text-amber-100 font-bold italic drop-shadow-[0_4px_4px_rgba(0,0,0,0.8)] group-hover:text-white transition-colors">
                      {id}
                    </span>
                 </div>
              </div>
          </div>

          {/* 4. Top & Bottom Filigree */}
          <div className="absolute top-3 left-1/2 -translate-x-1/2 opacity-50">
             <div className="w-32 h-16 border-t-2 border-amber-500/20 rounded-t-full"></div>
          </div>
          <div className="absolute bottom-6 left-1/2 -translate-x-1/2 flex flex-col items-center opacity-60">
             <div className="w-1 h-8 bg-gradient-to-b from-transparent to-amber-500/40 mb-2"></div>
             <Star size={12} className="text-amber-600" />
          </div>
      </div>
    </div>
  );

  return (
    <div className="min-h-screen bg-[#050810] text-amber-50 font-serif selection:bg-amber-900 selection:text-white overflow-x-hidden">
      
      {/* --- Rich Decorative Background --- */}
      <div className="fixed inset-0 z-0 pointer-events-none">
         {/* 1. Deep Gradient Base */}
         <div className="absolute inset-0 bg-gradient-to-b from-[#1a120b] via-[#0f172a] to-[#020617]"></div>
         
         {/* 2. Complex Wallpaper Pattern */}
         <div className="absolute inset-0 opacity-10" 
              style={{
                  backgroundImage: `
                    radial-gradient(circle at 100% 50%, transparent 20%, #000 21%, #000 34%, transparent 35%, transparent),
                    radial-gradient(circle at 0% 50%, transparent 20%, #000 21%, #000 34%, transparent 35%, transparent)
                  `,
                  backgroundSize: '60px 60px'
              }}>
         </div>
         <div className="absolute inset-0 opacity-[0.03] bg-[url('https://www.transparenttextures.com/patterns/black-scales.png')]"></div>

         {/* 3. Corner Vignette Ornaments */}
         <div className="absolute top-0 left-0 w-64 h-64 bg-gradient-to-br from-amber-900/20 to-transparent rounded-br-[100px] border-r border-b border-amber-900/10"></div>
         <div className="absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-amber-900/20 to-transparent rounded-bl-[100px] border-l border-b border-amber-900/10"></div>
      </div>

      <div className="relative z-10 max-w-5xl mx-auto px-6 py-12 min-h-screen flex flex-col">
        
        {/* Header - Chinese Dominant */}
        <header className="text-center mb-16 relative">
          
          {/* NEW: Styled Personal Note with Portrait Image */}
          <div className="inline-block mb-10 p-5 rounded-xl bg-[#1e293b]/70 border border-amber-500/30 backdrop-blur-md shadow-lg max-w-xl mx-auto transform hover:scale-[1.01] transition-transform duration-300 mt-8">
             <div className="flex flex-col md:flex-row items-center md:items-start gap-6 text-center md:text-left">
                {/* Image Container with break-out effect - NOW SOLID BACKGROUND */}
                <div className="relative -mt-12 shrink-0">
                  <div className="w-24 h-24 rounded-full border-4 border-[#0f172a] shadow-[0_0_20px_rgba(245,158,11,0.3)] overflow-hidden bg-[#0f172a] relative z-10">
                    <img 
                      src="https://github.com/shockingws/enc/blob/main/Erich.png?raw=true" 
                      alt="Erich"
                      className="w-full h-full object-cover object-top hover:scale-110 transition-transform duration-500"
                    />
                  </div>
                  {/* Decorative small icon badge */}
                  <div className="absolute bottom-0 right-0 p-1.5 bg-[#0f172a] rounded-full border border-amber-500/50 z-20">
                    <Sparkles size={12} className="text-amber-400" />
                  </div>
                </div>
                
                <div className="pt-2">
                   <h3 className="text-amber-400 font-bold font-sans text-sm tracking-wider uppercase mb-1">
                     Erich's Note
                   </h3>
                   <p className="text-amber-100/90 text-sm md:text-base font-sans leading-relaxed tracking-wide">
                    您的保險顧問 Erich 這次幫大家準備了 2026 年的大眾占卜，做成網站版方便大家抽牌，試一下吧～
                   </p>
                </div>
             </div>
          </div>

          <div className="flex items-center justify-center gap-3 mb-6 opacity-80">
             <div className="w-2 h-2 bg-amber-600 rounded-full"></div>
             <div className="h-[1px] w-24 bg-gradient-to-r from-transparent via-amber-600 to-transparent"></div>
             <div className="w-2 h-2 bg-amber-600 rounded-full"></div>
          </div>

          <h1 className="text-4xl md:text-6xl font-bold text-amber-100 mb-3 tracking-wider drop-shadow-2xl" 
              style={{ textShadow: '0 4px 20px rgba(180, 83, 9, 0.5)' }}>
             2026 新年工作大運占卜
          </h1>
          
          <div className="flex items-center justify-center gap-2">
            <span className="h-[1px] w-8 bg-amber-500/40"></span>
            <span className="text-amber-200/60 font-light tracking-[0.2em] uppercase text-xs md:text-sm font-sans">
              2026 Career Strategy Oracle
            </span>
            <span className="h-[1px] w-8 bg-amber-500/40"></span>
          </div>
        </header>

        {/* Intro View */}
        {gameState === 'intro' && (
          <div className="flex-1 flex flex-col items-center animate-fadeIn">
            
            {/* Instruction Scroll */}
            <div className="relative mb-12 max-w-2xl text-center px-8 py-2">
               {/* Decorative Side Lines */}
               <div className="absolute left-0 top-0 bottom-0 w-1 bg-gradient-to-b from-transparent via-amber-800/50 to-transparent"></div>
               <div className="absolute right-0 top-0 bottom-0 w-1 bg-gradient-to-b from-transparent via-amber-800/50 to-transparent"></div>

               <p className="text-xl md:text-2xl leading-relaxed text-amber-100/90 font-serif italic mb-6">
                 請在心中默念：
                 <br/>
                 <span className="inline-block mt-4 text-amber-300 font-bold tracking-wider border-b border-amber-800/50 pb-2">
                   ”2026 我的工作大運如何？“
                 </span>
               </p>
               
               {/* Explicit Action Instruction */}
               <div className="flex flex-col items-center gap-2 animate-pulse">
                  <span className="text-amber-500/80 text-sm md:text-base tracking-widest uppercase font-sans">
                     默念後，請憑直覺點選下方一張牌
                  </span>
                  <ChevronRight className="rotate-90 text-amber-500" size={20} />
               </div>
            </div>

            <div className="grid grid-cols-2 md:grid-cols-4 gap-6 md:gap-10 w-full max-w-5xl px-2">
              {['A', 'B', 'C', 'D'].map((id) => (
                <Card key={id} id={id} onClick={handleCardClick} disabled={false} />
              ))}
            </div>

            {/* Quote Footer for Home Page */}
            <div className="text-center mt-16 mb-8 opacity-60 hover:opacity-100 transition-opacity duration-700">
                <Flower size={20} className="mx-auto text-amber-500/50 mb-3" />
                <p className="text-amber-200/60 text-xs uppercase tracking-[0.4em] font-serif mb-2">Destiny is a choice</p>
                <p className="text-amber-200/40 text-xs font-serif tracking-[0.2em]">命運是一種選擇</p>
            </div>
          </div>
        )}

        {/* Shuffling State - Magical Animation */}
        {gameState === 'shuffling' && (
          <div className="flex-1 flex flex-col items-center justify-center min-h-[500px]">
            <div className="relative scale-150">
              {/* Complex Spinner */}
              <div className="absolute inset-0 rounded-full border border-amber-500/20 w-32 h-32 animate-[spin_10s_linear_infinite]"></div>
              <div className="absolute inset-2 rounded-full border-t border-b border-amber-500/60 w-28 h-28 animate-[spin_3s_linear_infinite]"></div>
              <div className="absolute inset-6 rounded-full border border-dashed border-amber-500/40 w-20 h-20 animate-[spin_6s_linear_infinite_reverse]"></div>
              
              <div className="w-32 h-32 flex items-center justify-center">
                 <Sun size={40} className="text-amber-200 animate-pulse" />
              </div>
            </div>
            <div className="mt-16 flex flex-col items-center gap-2">
               <p className="text-amber-100 text-lg font-serif italic">Connecting to the Ether...</p>
               <div className="flex gap-1">
                 <div className="w-1.5 h-1.5 bg-amber-500 rounded-full animate-bounce" style={{animationDelay: '0s'}}></div>
                 <div className="w-1.5 h-1.5 bg-amber-500 rounded-full animate-bounce" style={{animationDelay: '0.2s'}}></div>
                 <div className="w-1.5 h-1.5 bg-amber-500 rounded-full animate-bounce" style={{animationDelay: '0.4s'}}></div>
               </div>
            </div>
          </div>
        )}

        {/* Result View - Art Nouveau Layout */}
        {gameState === 'result' && selectedCard && (
          <div className="animate-slideUp flex-1 pb-12">
            
            <button 
              onClick={resetGame}
              className="mb-8 flex items-center gap-2 text-amber-600 hover:text-amber-200 transition-colors group mx-auto md:mx-0 px-4 py-2 border border-transparent hover:border-amber-900/50 rounded-full"
            >
              <ArrowLeft size={16} className="group-hover:-translate-x-1 transition-transform" />
              <span className="font-serif italic tracking-wider text-sm">我就是想重抽</span>
            </button>

            {/* Main Content Card - The "Painting" Frame */}
            <div className="relative bg-[#111827] border-2 border-[#5c4033] shadow-[0_20px_60px_-10px_rgba(0,0,0,0.7)] overflow-hidden rounded-t-[3rem] rounded-b-xl">
               
               {/* Ornate Top Decoration */}
               <div className="absolute top-0 left-0 right-0 h-32 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-amber-900/20 via-transparent to-transparent pointer-events-none"></div>
               <div className="absolute top-4 left-1/2 -translate-x-1/2 w-full max-w-sm h-[1px] bg-gradient-to-r from-transparent via-amber-700/50 to-transparent"></div>

               <div className="relative p-8 md:p-12 lg:p-16">
                 
                 {/* Card Display Section */}
                 <div className="flex flex-col items-center text-center mb-10">
                    
                    {/* Tarot Card Image Display with Arched Frame & Full Image */}
                    <div className="relative mb-10 group cursor-default">
                       {/* Back Glow */}
                       <div className="absolute -inset-4 bg-amber-600/20 rounded-t-full rounded-b-2xl blur-xl"></div>
                       
                       <div className="relative w-72 aspect-[2/3.5] bg-[#0a0f18] rounded-t-full rounded-b-2xl border-[3px] border-amber-600/40 flex flex-col items-center justify-end overflow-hidden shadow-2xl p-3">
                          
                          {/* 1. Upper Arched Decorative Area (Filler) */}
                          <div className="absolute top-0 inset-x-0 h-1/3 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-amber-900/40 via-[#0f172a] to-transparent">
                               {/* Decorative Elements in the Arch */}
                               <div className="absolute top-6 left-1/2 -translate-x-1/2 text-amber-500/30">
                                  <Star size={24} strokeWidth={1} />
                               </div>
                               <div className="absolute top-0 left-1/2 -translate-x-1/2 w-[1px] h-full bg-gradient-to-b from-amber-500/30 to-transparent"></div>
                               <div className="absolute top-0 w-full h-full opacity-20" 
                                    style={{backgroundImage: 'repeating-linear-gradient(45deg, transparent, transparent 10px, #b45309 10px, #b45309 11px)'}}>
                               </div>
                          </div>

                          {/* 2. The Real Card Image - Rectangular & Full View */}
                          <div className="relative z-10 w-full h-[82%] rounded-md overflow-hidden shadow-inner border border-white/10 bg-black/50">
                              <img 
                                src={tarotData[selectedCard].imgUrl} 
                                alt={tarotData[selectedCard].title} 
                                className="w-full h-full object-contain" 
                              />
                          </div>
                          
                          {/* Inner Decorative Border - Frame overlay */}
                          <div className="absolute inset-3 border border-dashed border-amber-500/20 rounded-t-full rounded-b-xl pointer-events-none z-20"></div>
                       </div>
                    </div>

                    <h2 className="text-4xl md:text-5xl font-bold text-amber-100 mb-6 font-serif tracking-wide">
                      {tarotData[selectedCard].title}
                    </h2>
                    
                    <div className="flex flex-wrap justify-center gap-3">
                      {tarotData[selectedCard].keywords.map((kw, idx) => (
                        <span key={idx} className="px-5 py-1.5 border border-amber-800/60 bg-[#1f1510] text-amber-100/90 text-sm font-serif italic rounded-full shadow-lg">
                          ✦ {kw}
                        </span>
                      ))}
                    </div>
                 </div>

                 {/* --- NEW: Career Stage Tabs --- */}
                 <div className="flex flex-wrap justify-center gap-3 mb-10 border-b border-amber-900/50 pb-8 px-4">
                    {[
                      { id: 'junior', label: '初入社會', sub: 'Freshman', icon: <User size={16} /> },
                      { id: 'senior', label: '資深職人', sub: 'Professional', icon: <Briefcase size={16} /> },
                      { id: 'leader', label: '管理/創業', sub: 'Leader', icon: <TrendingUp size={16} /> }
                    ].map((stage) => (
                      <button
                        key={stage.id}
                        onClick={() => setCareerStage(stage.id)}
                        className={`
                          relative px-6 py-3 rounded-xl border transition-all duration-300 flex items-center gap-3 min-w-[140px]
                          ${careerStage === stage.id 
                            ? 'bg-amber-900/40 border-amber-500 text-amber-100 shadow-[0_0_20px_rgba(245,158,11,0.15)]' 
                            : 'bg-[#0f172a]/50 border-amber-900/30 text-amber-400/50 hover:border-amber-700 hover:text-amber-200/80'}
                        `}
                      >
                        {careerStage === stage.id && (
                          <div className="absolute inset-0 border border-amber-400/30 rounded-xl animate-pulse"></div>
                        )}
                        <div className={`${careerStage === stage.id ? 'text-amber-400' : 'text-current'}`}>
                          {stage.icon}
                        </div>
                        <div className="text-left">
                           <span className="block text-sm font-bold tracking-wide">{stage.label}</span>
                           <span className="block text-[10px] uppercase tracking-wider opacity-60 font-sans">{stage.sub}</span>
                        </div>
                      </button>
                    ))}
                 </div>

                 {/* Content Grid (Dynamic based on stage) */}
                 <div className="grid gap-16 md:grid-cols-2 relative animate-fadeIn">
                    {/* Vertical Divider Line for Desktop */}
                    <div className="hidden md:block absolute left-1/2 top-0 bottom-0 w-[1px] bg-gradient-to-b from-transparent via-amber-800/30 to-transparent -translate-x-1/2"></div>

                    {/* Logic Section */}
                    <div>
                      <div className="flex items-center gap-3 mb-6">
                        <Moon size={24} className="text-amber-500" />
                        <h3 className="font-bold text-2xl text-amber-100 font-serif tracking-widest uppercase border-b border-amber-800/50 pb-1">The Logic</h3>
                      </div>
                      <p className="text-amber-100/80 leading-loose text-justify font-serif text-lg pl-2 border-l-2 border-amber-900/30">
                        {tarotData[selectedCard].advice[careerStage].logic}
                      </p>
                    </div>

                    {/* Action Section */}
                    <div>
                      <div className="flex items-center gap-3 mb-6">
                        <Sun size={24} className="text-amber-500" />
                        <h3 className="font-bold text-2xl text-amber-100 font-serif tracking-widest uppercase border-b border-amber-800/50 pb-1">Action</h3>
                      </div>
                      <ul className="space-y-8">
                        {tarotData[selectedCard].advice[careerStage].actions.map((item, idx) => (
                          <li key={idx} className="group relative pl-8">
                            <div className="absolute left-0 top-1.5 w-2 h-2 bg-amber-700 rotate-45 group-hover:bg-amber-400 group-hover:rotate-90 transition-all duration-300"></div>
                            <strong className="block text-xl text-amber-100 font-serif mb-2">{item.title}</strong>
                            <span className="text-amber-200/60 text-base leading-relaxed font-light">{item.desc}</span>
                          </li>
                        ))}
                      </ul>
                    </div>
                 </div>

                 {/* Note Section */}
                 <div className="mt-16 mx-auto max-w-3xl">
                    <div className="bg-[#1a1512] border border-amber-900/50 p-8 md:p-10 relative shadow-2xl rounded-xl">
                       <div className="absolute top-2 left-2 w-4 h-4 border-t border-l border-amber-600/40"></div>
                       <div className="absolute top-2 right-2 w-4 h-4 border-t border-r border-amber-600/40"></div>
                       <div className="absolute bottom-2 left-2 w-4 h-4 border-b border-l border-amber-600/40"></div>
                       <div className="absolute bottom-2 right-2 w-4 h-4 border-b border-r border-amber-600/40"></div>

                       <div className="absolute -top-4 left-1/2 -translate-x-1/2 bg-[#0a0f18] px-4 py-1 text-xs text-amber-500/80 uppercase tracking-[0.2em] border border-amber-900/50 rounded-full">
                          Strategic Note
                       </div>
                       <p className="text-amber-100/80 font-serif italic text-center text-lg leading-relaxed">
                          "{tarotData[selectedCard].advice[careerStage].note}"
                       </p>
                    </div>
                 </div>
               </div>
            </div>

            {/* Quote Footer */}
            <div className="text-center mt-12 mb-20">
                <Flower size={20} className="mx-auto text-amber-900/50 mb-4" />
                <p className="text-amber-800/50 text-xs uppercase tracking-[0.4em] font-serif">Destiny is a choice</p>
            </div>
          </div>
        )}

        {/* Updated CTA Footer: Clean Sans-Serif Style */}
        <div className="mt-auto pt-8 pb-4 relative z-20 space-y-6">
          
          {/* CTA 1: Tarot VIP */}
          <div className="relative overflow-hidden rounded-2xl border border-amber-700/30 bg-gradient-to-r from-[#1e130c] to-[#0f172a] shadow-2xl group transition-all duration-500 hover:border-amber-500/60">
            {/* Background Decor */}
            <div className="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/floral-linen.png')]"></div>
            <div className="absolute right-0 top-0 bottom-0 w-1/2 bg-gradient-to-l from-amber-600/10 to-transparent pointer-events-none"></div>
            
            {/* Removed font-serif, using default sans for clarity */}
            <div className="relative p-8 flex flex-col md:flex-row items-center justify-between gap-8 font-sans">
              <div className="text-center md:text-left">
                <div className="flex items-center justify-center md:justify-start gap-3 mb-3">
                  <Star size={12} className="text-amber-500" />
                  <span className="text-xs font-bold text-amber-500 uppercase tracking-[0.2em]">VIP Access</span>
                  <Star size={12} className="text-amber-500" />
                </div>
                <h3 className="text-2xl md:text-3xl font-bold text-amber-50 mb-2">
                  2026 塔羅與生命靈數 <br /> <span className="text-amber-500">線下諮詢</span>
                </h3>
                <p className="text-amber-200/60 text-sm max-w-lg leading-relaxed">
                  我除了是您的風險守護者，更是您未來的策略引路人。加入紙牌的祕密電子報，獲取優先預約權和更多大眾線上占卜。
                </p>
              </div>

              <a 
                href="https://secret-kards.kit.com/2baefe46f5" 
                target="_blank"
                rel="noopener noreferrer"
                className="flex-shrink-0 relative group/btn overflow-hidden px-8 py-3 bg-[#451a03] text-amber-50 font-bold tracking-wider hover:bg-[#5e2d14] transition-all border border-amber-600/30 shadow-lg rounded-full"
              >
                <div className="absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover/btn:animate-[shimmer_1.5s_infinite]"></div>
                <span className="relative z-10 flex items-center gap-2">
                  <Mail size={18} />
                  加入『紙牌的祕密』 VIP Email名單
                  <ChevronRight size={18} className="group-hover/btn:translate-x-1 transition-transform" />
                </span>
              </a>
            </div>
          </div>

          {/* CTA 2: Insurance - Yingzhe Baoshen */}
          <div className="relative overflow-hidden rounded-2xl border border-amber-700/30 bg-gradient-to-r from-[#0f172a] to-[#1e130c] shadow-2xl group transition-all duration-500 hover:border-amber-500/60">
            {/* Background Decor - Different pattern to distinguish */}
            <div className="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
            
            <div className="relative p-8 flex flex-col md:flex-row items-center justify-between gap-8 font-sans">
              <div className="text-center md:text-left">
                <div className="flex items-center justify-center md:justify-start gap-3 mb-3">
                  <Shield size={12} className="text-amber-500" />
                  <span className="text-xs font-bold text-amber-500 uppercase tracking-[0.2em]">Risk Management</span>
                  <Shield size={12} className="text-amber-500" />
                </div>
                <h3 className="text-2xl md:text-3xl font-bold text-amber-50 mb-2">
                  我還不是您的風險守護者？
                </h3>
                <p className="text-amber-200/60 text-sm max-w-lg leading-relaxed">
                  讓盈哲保身成為您的全方位保險顧問。我們不只賣保險，更為您建構最堅實的人生防護網。
                </p>
              </div>

              <a 
                href="https://erichlin2.notion.site/?source=copy_link" 
                target="_blank"
                rel="noopener noreferrer"
                className="flex-shrink-0 relative group/btn overflow-hidden px-8 py-3 bg-[#1e293b] text-amber-50 font-bold tracking-wider hover:bg-[#334155] transition-all border border-amber-600/30 shadow-lg rounded-full"
              >
                <div className="absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full group-hover/btn:animate-[shimmer_1.5s_infinite]"></div>
                <span className="relative z-10 flex items-center gap-2">
                  <ExternalLink size={18} />
                  知道我們在做什麼
                  <ChevronRight size={18} className="group-hover/btn:translate-x-1 transition-transform" />
                </span>
              </a>
            </div>
          </div>
          
          {/* NEW: Disclaimer Footer */}
          <div className="text-center mt-6 opacity-40">
             <p className="text-[10px] md:text-xs text-amber-100/50 font-sans tracking-widest">
               *大眾占卜僅供參考娛樂用，請依個人意志理性判斷
             </p>
          </div>

          {/* Footer Logos */}
          <div className="flex justify-center items-center gap-6 mt-8 mb-4 flex-wrap">
            <a href="https://erichlin2.notion.site/?source=copy_link" target="_blank" rel="noopener noreferrer" className="opacity-70 hover:opacity-100 transition-opacity transform hover:scale-110 duration-300">
              <img src="https://github.com/shockingws/enc/blob/main/EnC_Logo.PNG?raw=true" alt="EnC Logo" className="w-[60px] h-[60px] object-cover rounded-full drop-shadow-[0_0_8px_rgba(255,255,255,0.2)]" />
            </a>
            <a href="https://www.instagram.com/octopodacreative/" target="_blank" rel="noopener noreferrer" className="opacity-70 hover:opacity-100 transition-opacity transform hover:scale-110 duration-300">
              <img src="https://github.com/shockingws/enc/blob/main/%E5%85%AB%E8%85%95%E7%9B%AElogo.png?raw=true" alt="Octopoda Creative" className="w-[60px] h-[60px] object-cover rounded-full drop-shadow-[0_0_8px_rgba(255,255,255,0.2)]" />
            </a>
            <a href="https://www.instagram.com/shockingws" target="_blank" rel="noopener noreferrer" className="opacity-70 hover:opacity-100 transition-opacity transform hover:scale-110 duration-300">
              <img src="https://github.com/shockingws/enc/blob/main/%E4%B8%8D%E8%AA%8D%E7%9C%9F%E5%B0%B1%E8%BC%B8%E4%BA%86logo.png?raw=true" alt="ShockingWS" className="w-[60px] h-[60px] object-cover rounded-full drop-shadow-[0_0_8px_rgba(255,255,255,0.2)]" />
            </a>
            <a href="https://www.instagram.com/secret_kards/" target="_blank" rel="noopener noreferrer" className="opacity-70 hover:opacity-100 transition-opacity transform hover:scale-110 duration-300">
              <img src="https://github.com/shockingws/enc/blob/main/secretKards.jpg?raw=true" alt="Secret Kards" className="w-[60px] h-[60px] object-cover rounded-full drop-shadow-[0_0_8px_rgba(255,255,255,0.2)]" />
            </a>
          </div>
        </div>

      </div>
    </div>
  );
};

export default TarotApp;
